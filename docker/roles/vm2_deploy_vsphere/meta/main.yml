---
# Copyright (C) 2015 by
# Ericsson AB
# S-164 83 Stockholm
# Sweden
# Tel: +46 10 719 00 00
#
# The program may be used and/or copied only with the written permission
# from Ericsson AB, or in accordance with the terms and
# conditions stipulated in the agreement/contract under which the program
# has been supplied.
#
# All rights reserved.
allow_duplicates: yes
dependencies:
- { role: vm2_config, storage_type: VMWARE }
- { role: vm_deploy_vsphere2, upload_afg_supp: False, vm_vmdk: "{{ mn_vmdk | default(mn_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_mn | default(resource_mem_mn_i) }}", resource_cpu_vm: "{{ resource_cpu_mn | default(resource_cpu_mn_i) }}", nic1_enable: True, nic2_enable: True,  deploy_address: "{{ mn_config_typ | default('firstinstall') }}", rootdisk_size: "{{ mn_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="mn"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ ts_vmdk | default(ts_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_ts | default(resource_mem_ts_i) }}", resource_cpu_vm: "{{ resource_cpu_ts | default(resource_cpu_ts_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, nic4_enable: True, rootdisk_size: "{{ ts_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="ts"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ dk_vmdk | default(dk_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_ts | default(resource_mem_ts_i) }}", resource_cpu_vm: "{{ resource_cpu_ts | default(resource_cpu_ts_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, nic4_enable: True, rootdisk_size: "{{ ts_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="dk"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ slb_vmdk | default(slb_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_slb | default(resource_mem_slb_i) }}", resource_cpu_vm: "{{ resource_cpu_slb | default(resource_cpu_slb_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, nic4_enable: True, nic5_enable: True, nic6_enable: True, rootdisk_size: "{{ slb_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="slb"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ mon_vmdk | default(mon_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_mon | default(resource_mem_mon_i) }}", resource_cpu_vm: "{{ resource_cpu_mon | default(resource_cpu_mon_i) }}", nic1_enable: True, nic2_enable: True, rootdisk_size: "{{ mon_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="mon"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ ddc_vmdk | default(ddc_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_ddc | default(resource_mem_ddc_i) }}", resource_cpu_vm: "{{ resource_cpu_ddc | default(resource_cpu_ddc_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, rootdisk_size: "{{ ddc_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="ddc"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ vom_vmdk | default(vom_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_vom | default(resource_mem_vom_i) }}", resource_cpu_vm: "{{ resource_cpu_vom | default(resource_cpu_vom_i) }}", nic1_enable: True, nic2_enable: True, rootdisk_size: "{{ vom_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="vom"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ da_vmdk | default(da_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_da | default(resource_mem_da_i) }}", resource_cpu_vm: "{{ resource_cpu_da | default(resource_cpu_da_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, rootdisk_size: "{{ da_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="da"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ cim_vmdk | default(cim_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_cim | default(resource_mem_cim_i) }}", resource_cpu_vm: "{{ resource_cpu_cim | default(resource_cpu_cim_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, rootdisk_size: "{{ cim_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="cim"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ jeos_vmdk | default(jeos_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_jeos | default(resource_mem_jeos_i) }}", resource_cpu_vm: "{{ resource_cpu_jeos | default(resource_cpu_jeos_i) }}", nic1_enable: True, nic2_enable: True, rootdisk_size: "{{ jeos_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="jeos"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ tools_vmdk | default(tools_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_tools | default(resource_mem_tools_i) }}", resource_cpu_vm: "{{ resource_cpu_tools | default(resource_cpu_tools_i) }}", nic1_enable: True, nic2_enable: True, rootdisk_size: "{{ tools_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="tools"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ custom_vmdk | default(custom_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_custom | default(resource_mem_custom_i) }}", resource_cpu_vm: "{{ resource_cpu_custom | default(resource_cpu_custom_i) }}", nic1_enable: True, nic2_enable: True, rootdisk_size: "{{ custom_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type=="custom"}
- { role: vm_deploy_vsphere2, vm_vmdk: "{{ std_vmdk | default(auto_std_vmdk) }}", resource_mem_vm: "{{ resource_mem_std | default(resource_mem_std_i) }}", resource_cpu_vm: "{{ resource_cpu_std | default(resource_cpu_std_i) }}", nic1_enable: True, nic2_enable: False, rootdisk_size: "{{ std_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type not in all_vm_types }

#- { role: vm_deploy_vsphere2, vm_vmdk: "{{ vm_type_images[vm_type].image | default(mdnms_vmdk_i) }}", resource_mem_vm: "{{ resource_mem_std | default(resource_mem_std_i) }}", resource_cpu_vm: "{{ resource_cpu_std | default(resource_cpu_std_i) }}", nic1_enable: True, nic2_enable: True, nic3_enable: True, nic4_enable: True, rootdisk_size: "{{ std_rootdisk_size | default(default_rootdisk_size) }}", when: vm_type in mdn_vm_types | default() }



